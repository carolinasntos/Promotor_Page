<html>
    <head>
        <!--Se declara los valores meta de la página, en este caso siendo el tipo de entrada-->
        <meta charset="utf-8">
        <meta name="Whireport" content="Software privado para Whirlpool" lang="es">
        <title>Iniciar Sesión</title>
        <link rel="stylesheet" href="IniciarSesion.css">
        <!-- Se carga la API de google fonts y luego se cargan las fuentes oficiales del socio formador-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    </head>
    <body>
        <div class="login-box">
            <h1>Iniciar Sesión</h1>
            <p id="p2"></p>
            <!--<form>-->
              <label for="email">Correo Electrónico</label>
              <input id="email" type="text" placeholder="Ingresar Correo Electrónico" autocomplete="email" data-autofill ="true">
              
              <label for="password">Contraseña</label>
              <input id="pass" type="password">
              <!--<input id="pass" type="password" placeholder="Ingresar Contraseña" autocomplete="password" data-autofill ="true">
              <input type="submit" value="Log In">
              <br>-->
              <input id="btn1" type="button" onclick="start()" value="Log In">
              <p id="p1"></p>
              <br>       
              <!--
              <center><a href="#">¿Primera vez en WhirlReport? Registrate.</a></center> -->
            <!--</form>-->
          </div>  
    <script>
      const start=async function(){
        const url=
        'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBT7cdhS5BC5A4klorudSSjkJG_dvHSnYU';
        const data= 
          '{"email":"'+document.getElementById("email").value+'","password":"'+document.getElementById("pass").value+'","returnSecureToken":true}';
        const resp=await fetch(url,{
          method:'POST',
          headers:{
            'Content-Type':'application/json'
          },
          body:data,
        });
        const text=await resp.text();
        const json=JSON.parse(text);

        document.getElementById('p1').innerText=text;
        if(json.registered){
          document.getElementById('p2').innerText='Sesión Iniciada';
          window.location.href = 'Menu.html'; // Cambia 'paginaDestino.html' por la URL a la que quieres redirigir
        }else{
          document.getElementById('p2').innerText='Error al iniciar sesión,\n el nombre de usuario o la contraseña son incorrectos \n\n';
        }
      }
    </script>    
    </body>
</html>
